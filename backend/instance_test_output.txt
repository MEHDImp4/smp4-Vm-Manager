PASS __tests__/unit/instanceController.test.js (6.821 s)
  Instance Controller Unit Tests
    toggleInstanceStatus
      ΓêÜ should stop a running instance (6 ms)
      ΓêÜ should start a stopped instance (1 ms)
      ΓêÜ should return 404 if instance not found (1 ms)
    restartInstance
      ΓêÜ should reboot instance (1 ms)
    deleteInstance
      ΓêÜ should delete instance and cleanup resources (3008 ms)
      ΓêÜ should handle errors during stop gracefully (1 ms)
      ΓêÜ should handle errors during proxmox delete gracefully (3012 ms)
    getInstanceStats
      ΓêÜ should return stats for running instance (1 ms)
      ΓêÜ should return zero stats for stopped instance
      ΓêÜ should handle proxmox errors by returning zeros/unknown (1 ms)
    createDomain
      ΓêÜ should create a domain successfully (1 ms)
      ΓêÜ should validate inputs
    deleteDomain
      ΓêÜ should delete domain successfully (1 ms)
      ΓêÜ should return 404 if domain not found
    getDomains
      ΓêÜ should return domains (1 ms)
      ΓêÜ should return 404 if instance not found
    getVpnConfig
      ΓêÜ should return existing config (1 ms)
      ΓêÜ should generate config if missing and instance has IP
    createInstance
      ΓêÜ should create instance successfully (2 ms)
      ΓêÜ should return 400 for invalid template
      ΓêÜ should return 500 on db error

Test Suites: 1 passed, 1 total
Tests:       21 passed, 21 total
Snapshots:   0 total
Time:        6.898 s, estimated 8 s
Ran all test suites matching /instanceController.test.js/i.
Jest did not exit one second after the test run has completed.

'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.
